{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"../../services/carrinho.service\";\nexport class ProdutosComponent {\n  constructor(apiService, carrinhoService) {\n    this.apiService = apiService;\n    this.carrinhoService = carrinhoService;\n    this.produtos = [];\n    this.carregando = false;\n    this.erro = '';\n    this.mostrarFormulario = false;\n    this.produtoEdicao = null;\n    // Formulário\n    this.formulario = {\n      sku: '',\n      nome: '',\n      precoBase: 0,\n      ativo: true,\n      estoqueAtual: 0\n    };\n  }\n  ngOnInit() {\n    this.carregarProdutos();\n  }\n  carregarProdutos() {\n    this.carregando = true;\n    this.erro = '';\n    this.apiService.obterProdutos().subscribe({\n      next: resultado => {\n        if (resultado.sucesso) {\n          this.produtos = resultado.dados;\n        } else {\n          this.erro = resultado.mensagem;\n        }\n        this.carregando = false;\n      },\n      error: error => {\n        this.erro = 'Erro ao carregar produtos: ' + error.message;\n        this.carregando = false;\n      }\n    });\n  }\n  adicionarAoCarrinho(produto) {\n    this.carrinhoService.adicionarItem(produto, 1);\n    alert(`${produto.nome} adicionado ao carrinho!`);\n  }\n  formatarPreco(preco) {\n    return preco.toLocaleString('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    });\n  }\n  // CRUD Produtos\n  mostrarFormularioNovo() {\n    this.mostrarFormulario = true;\n    this.produtoEdicao = null;\n    this.limparFormulario();\n  }\n  editarProduto(produto) {\n    this.mostrarFormulario = true;\n    this.produtoEdicao = produto;\n    this.formulario = {\n      sku: produto.sku,\n      nome: produto.nome,\n      precoBase: produto.precoBase,\n      ativo: produto.ativo,\n      estoqueAtual: produto.estoqueAtual\n    };\n  }\n  salvarProduto() {\n    if (this.produtoEdicao) {\n      // Atualizar\n      const dto = {\n        nome: this.formulario.nome,\n        precoBase: this.formulario.precoBase,\n        ativo: this.formulario.ativo,\n        estoqueAtual: this.formulario.estoqueAtual\n      };\n      this.apiService.atualizarProduto(this.produtoEdicao.id, dto).subscribe({\n        next: resultado => {\n          if (resultado.sucesso) {\n            this.carregarProdutos();\n            this.cancelarFormulario();\n            alert('Produto atualizado com sucesso!');\n          } else {\n            alert('Erro: ' + resultado.mensagem);\n          }\n        },\n        error: error => {\n          alert('Erro ao atualizar produto: ' + error.message);\n        }\n      });\n    } else {\n      // Criar novo\n      const dto = {\n        sku: this.formulario.sku,\n        nome: this.formulario.nome,\n        precoBase: this.formulario.precoBase,\n        ativo: this.formulario.ativo,\n        estoqueAtual: this.formulario.estoqueAtual\n      };\n      this.apiService.criarProduto(dto).subscribe({\n        next: resultado => {\n          if (resultado.sucesso) {\n            this.carregarProdutos();\n            this.cancelarFormulario();\n            alert('Produto criado com sucesso!');\n          } else {\n            alert('Erro: ' + resultado.mensagem);\n          }\n        },\n        error: error => {\n          alert('Erro ao criar produto: ' + error.message);\n        }\n      });\n    }\n  }\n  excluirProduto(produto) {\n    if (confirm(`Deseja excluir o produto ${produto.nome}?`)) {\n      this.apiService.excluirProduto(produto.id).subscribe({\n        next: resultado => {\n          if (resultado.sucesso) {\n            this.carregarProdutos();\n            alert('Produto excluído com sucesso!');\n          } else {\n            alert('Erro: ' + resultado.mensagem);\n          }\n        },\n        error: error => {\n          alert('Erro ao excluir produto: ' + error.message);\n        }\n      });\n    }\n  }\n  cancelarFormulario() {\n    this.mostrarFormulario = false;\n    this.produtoEdicao = null;\n    this.limparFormulario();\n  }\n  limparFormulario() {\n    this.formulario = {\n      sku: '',\n      nome: '',\n      precoBase: 0,\n      ativo: true,\n      estoqueAtual: 0\n    };\n  }\n  static {\n    this.ɵfac = function ProdutosComponent_Factory(t) {\n      return new (t || ProdutosComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.CarrinhoService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProdutosComponent,\n      selectors: [[\"app-produtos\"]],\n      decls: 2,\n      vars: 0,\n      template: function ProdutosComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"produtos works!\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["ProdutosComponent","constructor","apiService","carrinhoService","produtos","carregando","erro","mostrarFormulario","produtoEdicao","formulario","sku","nome","precoBase","ativo","estoqueAtual","ngOnInit","carregarProdutos","obterProdutos","subscribe","next","resultado","sucesso","dados","mensagem","error","message","adicionarAoCarrinho","produto","adicionarItem","alert","formatarPreco","preco","toLocaleString","style","currency","mostrarFormularioNovo","limparFormulario","editarProduto","salvarProduto","dto","atualizarProduto","id","cancelarFormulario","criarProduto","excluirProduto","confirm","i0","ɵɵdirectiveInject","i1","ApiService","i2","CarrinhoService","selectors","decls","vars","template","ProdutosComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sources":["C:\\Users\\mathe\\source\\repos\\GestaoPedidos\\GestaoPedidos.Angular\\src\\app\\components\\produtos\\produtos.component.ts","C:\\Users\\mathe\\source\\repos\\GestaoPedidos\\GestaoPedidos.Angular\\src\\app\\components\\produtos\\produtos.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ApiService } from '../../services/api.service';\nimport { CarrinhoService } from '../../services/carrinho.service';\nimport { Produto } from '../../models/produto.model';\n\n@Component({\n  selector: 'app-produtos',\n  templateUrl: './produtos.component.html',\n  styleUrls: ['./produtos.component.css']\n})\nexport class ProdutosComponent implements OnInit {\n  produtos: Produto[] = [];\n  carregando = false;\n  erro = '';\n  mostrarFormulario = false;\n  produtoEdicao: Produto | null = null;\n\n  // Formulário\n  formulario = {\n    sku: '',\n    nome: '',\n    precoBase: 0,\n    ativo: true,\n    estoqueAtual: 0\n  };\n\n  constructor(\n    private apiService: ApiService,\n    private carrinhoService: CarrinhoService\n  ) { }\n\n  ngOnInit() {\n    this.carregarProdutos();\n  }\n\n  carregarProdutos() {\n    this.carregando = true;\n    this.erro = '';\n    \n    this.apiService.obterProdutos().subscribe({\n      next: (resultado) => {\n        if (resultado.sucesso) {\n          this.produtos = resultado.dados;\n        } else {\n          this.erro = resultado.mensagem;\n        }\n        this.carregando = false;\n      },\n      error: (error) => {\n        this.erro = 'Erro ao carregar produtos: ' + error.message;\n        this.carregando = false;\n      }\n    });\n  }\n\n  adicionarAoCarrinho(produto: Produto) {\n    this.carrinhoService.adicionarItem(produto, 1);\n    alert(`${produto.nome} adicionado ao carrinho!`);\n  }\n\n  formatarPreco(preco: number): string {\n    return preco.toLocaleString('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    });\n  }\n\n  // CRUD Produtos\n  mostrarFormularioNovo() {\n    this.mostrarFormulario = true;\n    this.produtoEdicao = null;\n    this.limparFormulario();\n  }\n\n  editarProduto(produto: Produto) {\n    this.mostrarFormulario = true;\n    this.produtoEdicao = produto;\n    this.formulario = {\n      sku: produto.sku,\n      nome: produto.nome,\n      precoBase: produto.precoBase,\n      ativo: produto.ativo,\n      estoqueAtual: produto.estoqueAtual\n    };\n  }\n\n  salvarProduto() {\n    if (this.produtoEdicao) {\n      // Atualizar\n      const dto = {\n        nome: this.formulario.nome,\n        precoBase: this.formulario.precoBase,\n        ativo: this.formulario.ativo,\n        estoqueAtual: this.formulario.estoqueAtual\n      };\n\n      this.apiService.atualizarProduto(this.produtoEdicao.id, dto).subscribe({\n        next: (resultado) => {\n          if (resultado.sucesso) {\n            this.carregarProdutos();\n            this.cancelarFormulario();\n            alert('Produto atualizado com sucesso!');\n          } else {\n            alert('Erro: ' + resultado.mensagem);\n          }\n        },\n        error: (error) => {\n          alert('Erro ao atualizar produto: ' + error.message);\n        }\n      });\n    } else {\n      // Criar novo\n      const dto = {\n        sku: this.formulario.sku,\n        nome: this.formulario.nome,\n        precoBase: this.formulario.precoBase,\n        ativo: this.formulario.ativo,\n        estoqueAtual: this.formulario.estoqueAtual\n      };\n\n      this.apiService.criarProduto(dto).subscribe({\n        next: (resultado) => {\n          if (resultado.sucesso) {\n            this.carregarProdutos();\n            this.cancelarFormulario();\n            alert('Produto criado com sucesso!');\n          } else {\n            alert('Erro: ' + resultado.mensagem);\n          }\n        },\n        error: (error) => {\n          alert('Erro ao criar produto: ' + error.message);\n        }\n      });\n    }\n  }\n\n  excluirProduto(produto: Produto) {\n    if (confirm(`Deseja excluir o produto ${produto.nome}?`)) {\n      this.apiService.excluirProduto(produto.id).subscribe({\n        next: (resultado) => {\n          if (resultado.sucesso) {\n            this.carregarProdutos();\n            alert('Produto excluído com sucesso!');\n          } else {\n            alert('Erro: ' + resultado.mensagem);\n          }\n        },\n        error: (error) => {\n          alert('Erro ao excluir produto: ' + error.message);\n        }\n      });\n    }\n  }\n\n  cancelarFormulario() {\n    this.mostrarFormulario = false;\n    this.produtoEdicao = null;\n    this.limparFormulario();\n  }\n\n  private limparFormulario() {\n    this.formulario = {\n      sku: '',\n      nome: '',\n      precoBase: 0,\n      ativo: true,\n      estoqueAtual: 0\n    };\n  }\n}\n","<p>produtos works!</p>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}