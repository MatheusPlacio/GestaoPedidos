{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/carrinho.service\";\nimport * as i2 from \"../../services/api.service\";\nimport * as i3 from \"@angular/common\";\nfunction CarrinhoComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"p\");\n    i0.ɵɵtext(2, \"Seu carrinho est\\u00E1 vazio.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Adicione produtos do cat\\u00E1logo para continuar.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CarrinhoComponent_div_4_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"h4\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 13);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 14);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 15)(9, \"label\");\n    i0.ɵɵtext(10, \"Quantidade:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 16);\n    i0.ɵɵlistener(\"change\", function CarrinhoComponent_div_4_div_2_Template_input_change_11_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.atualizarQuantidade(item_r3.produto.id, $event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 17)(13, \"p\", 18);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 19)(16, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function CarrinhoComponent_div_4_div_2_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.removerItem(item_r3.produto.id));\n    });\n    i0.ɵɵtext(17, \" Remover \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r3.produto.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"SKU: \", item_r3.produto.sku, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.formatarPreco(item_r3.produto.precoBase));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"max\", item_r3.produto.estoqueAtual)(\"value\", item_r3.quantidade);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.formatarPreco(item_r3.produto.precoBase * item_r3.quantidade));\n  }\n}\nfunction CarrinhoComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4);\n    i0.ɵɵtemplate(2, CarrinhoComponent_div_4_div_2_Template, 18, 6, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 6)(4, \"div\", 7)(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function CarrinhoComponent_div_4_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.limparCarrinho());\n    });\n    i0.ɵɵtext(9, \" Limpar Carrinho \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function CarrinhoComponent_div_4_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.finalizarPedido());\n    });\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.itens);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Total: \", ctx_r1.formatarPreco(ctx_r1.obterTotal()), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.criandoPedido);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.criandoPedido ? \"Criando Pedido...\" : \"Finalizar Pedido\", \" \");\n  }\n}\nexport let CarrinhoComponent = /*#__PURE__*/(() => {\n  class CarrinhoComponent {\n    constructor(carrinhoService, apiService) {\n      this.carrinhoService = carrinhoService;\n      this.apiService = apiService;\n      this.itens = [];\n      this.clienteId = 1; // Cliente padrão para simplificação\n      this.criandoPedido = false;\n    }\n    ngOnInit() {\n      this.carrinhoService.itensCarrinho$.subscribe(itens => {\n        this.itens = itens;\n      });\n    }\n    atualizarQuantidade(produtoId, event) {\n      const quantidade = parseInt(event.target.value);\n      if (quantidade > 0) {\n        this.carrinhoService.atualizarQuantidade(produtoId, quantidade);\n      }\n    }\n    removerItem(produtoId) {\n      this.carrinhoService.removerItem(produtoId);\n    }\n    obterTotal() {\n      return this.carrinhoService.obterTotal();\n    }\n    formatarPreco(preco) {\n      return preco.toLocaleString('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n      });\n    }\n    finalizarPedido() {\n      if (this.itens.length === 0) {\n        alert('Carrinho vazio!');\n        return;\n      }\n      this.criandoPedido = true;\n      const pedido = {\n        clienteId: this.clienteId,\n        itens: this.itens.map(item => ({\n          produtoId: item.produto.id,\n          quantidade: item.quantidade\n        }))\n      };\n      this.apiService.criarPedido(pedido).subscribe({\n        next: resultado => {\n          if (resultado.sucesso) {\n            alert(`Pedido criado com sucesso! ID: ${resultado.dados}`);\n            this.carrinhoService.limparCarrinho();\n          } else {\n            alert('Erro ao criar pedido: ' + resultado.mensagem);\n          }\n          this.criandoPedido = false;\n        },\n        error: error => {\n          alert('Erro ao criar pedido: ' + error.message);\n          this.criandoPedido = false;\n        }\n      });\n    }\n    limparCarrinho() {\n      if (confirm('Deseja limpar o carrinho?')) {\n        this.carrinhoService.limparCarrinho();\n      }\n    }\n    static {\n      this.ɵfac = function CarrinhoComponent_Factory(t) {\n        return new (t || CarrinhoComponent)(i0.ɵɵdirectiveInject(i1.CarrinhoService), i0.ɵɵdirectiveInject(i2.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CarrinhoComponent,\n        selectors: [[\"app-carrinho\"]],\n        decls: 5,\n        vars: 2,\n        consts: [[1, \"carrinho-container\"], [\"class\", \"carrinho-vazio\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"carrinho-vazio\"], [1, \"itens-carrinho\"], [\"class\", \"item-carrinho\", 4, \"ngFor\", \"ngForOf\"], [1, \"carrinho-resumo\"], [1, \"total-geral\"], [1, \"carrinho-actions\"], [1, \"btn-limpar\", 3, \"click\"], [1, \"btn-finalizar\", 3, \"disabled\", \"click\"], [1, \"item-carrinho\"], [1, \"item-info\"], [1, \"item-sku\"], [1, \"item-preco\"], [1, \"item-quantidade\"], [\"type\", \"number\", \"min\", \"1\", 3, \"max\", \"value\", \"change\"], [1, \"item-total\"], [1, \"subtotal\"], [1, \"item-actions\"], [1, \"btn-remover\", 3, \"click\"]],\n        template: function CarrinhoComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Carrinho de Compras\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(3, CarrinhoComponent_div_3_Template, 5, 0, \"div\", 1);\n            i0.ɵɵtemplate(4, CarrinhoComponent_div_4_Template, 12, 4, \"div\", 2);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.itens.length === 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.itens.length > 0);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf],\n        styles: [\".carrinho-container[_ngcontent-%COMP%]{padding:20px;max-width:1000px;margin:0 auto}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:30px;text-align:center}.carrinho-vazio[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background-color:#f5f5f5;border-radius:8px;color:#666}.carrinho-vazio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px}.itens-carrinho[_ngcontent-%COMP%]{margin-bottom:30px}.item-carrinho[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 100px;gap:20px;align-items:center;padding:20px;border:1px solid #ddd;border-radius:8px;margin-bottom:15px;background-color:#fff}.item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin-bottom:8px;font-size:16px}.item-info[_ngcontent-%COMP%]   .item-sku[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-bottom:5px}.item-info[_ngcontent-%COMP%]   .item-preco[_ngcontent-%COMP%]{color:#2e7d32;font-weight:700;font-size:16px}.item-quantidade[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.item-quantidade[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:14px;color:#555}.item-quantidade[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:center;font-size:16px}.item-total[_ngcontent-%COMP%]{text-align:center}.item-total[_ngcontent-%COMP%]   .subtotal[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#2e7d32}.item-actions[_ngcontent-%COMP%]{text-align:center}.btn-remover[_ngcontent-%COMP%]{background-color:#d32f2f;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px}.btn-remover[_ngcontent-%COMP%]:hover{background-color:#b71c1c}.carrinho-resumo[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px;border-radius:8px;border-top:3px solid #1976d2}.total-geral[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.total-geral[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:24px;margin:0}.carrinho-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center}.btn-limpar[_ngcontent-%COMP%], .btn-finalizar[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .2s}.btn-limpar[_ngcontent-%COMP%]{background-color:#666;color:#fff}.btn-limpar[_ngcontent-%COMP%]:hover{background-color:#555}.btn-finalizar[_ngcontent-%COMP%]{background-color:#2e7d32;color:#fff}.btn-finalizar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1b5e20}.btn-finalizar[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}@media (max-width: 768px){.item-carrinho[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px;text-align:center}.carrinho-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn-limpar[_ngcontent-%COMP%], .btn-finalizar[_ngcontent-%COMP%]{width:200px}}\"]\n      });\n    }\n  }\n  return CarrinhoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}